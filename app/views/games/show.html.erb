<%# Gets all the info from the game model to update in game_subscription stimulus %>
<div class="game-show-container"
     data-controller="game-subscription"
     data-game-subscription-game-id-value="<%= @game.id %>"
     data-game-subscription-user-id-value="<%= current_user.id %>"
     data-game-subscription-player-one-id-value="<%= @game.player_one.id %>"
     data-game-subscription-player-two-id-value="<%= @game.player_two.id %>"
     data-game-subscription-update-url="<%= game_path(@game) %>">

  <div class="game-show-container"
        data-controller="solution"
        data-solution-game-round-method-value="<%= @game.game_rounds.first.challenge.method_template %>"
        data-solution-game-id-value="<%= @game.id %>"
        data-solution-game-player-one-value="<%= @game.player_one.id %>"
        data-solution-game-player-two-value="<%= @game.player_two.id %>"
        data-solution-user-id-value="<%= current_user.id %>">

    <div class="user-codebox" id="user-codebox-1">
      <div class="user-details">
        <div><%= image_tag(@game.player_one.avatar, class: "user-avatar") %></div>
        <h2 class="user-name"><%= @game.player_one.username %></h2>
      </div>
      <textarea data-solution-target="editorone"></textarea>
      <div class="code-submit-buttons">
        <button id="playerOneClear" class="code-submit" data-action="click->solution#clearPlayerOneSubmission">Clear</button>
        <div class="right-buttons">
          <button id="playerOneTest" class="code-submit">Test</button>
          <button id="playerOneSubmit" class="code-submit" data-action="click->solution#playerOneSubmission">Submit</button>
        </div>
      </div>
    </div>

    <div class="game-round-instructions-and-tests-boxes" data-controller="challenge-instructions">
      <div class="buttons-group">
        <button id="description" data-challenge-instructions-target="button" data-action="click->challenge-instructions#changeTab" class="active">Instructions</button>
        <button id="tests" data-challenge-instructions-target="button" data-action="click->challenge-instructions#changeTab">Tests</button>
      </div>
      <div class="game-round-instructions" data-challenge-instructions-target="description content">
        <p><%= @game.game_rounds.first.challenge.description %></p>
      </div>
      <div class="game-round-tests d-none" data-challenge-instructions-target="tests content">
        <p data-solution-target="output">Awaiting code submission</p>
      </div>
    </div>

    <div class="user-codebox" id="user-codebox-2">
      <div class="user-details">
        <div><%= image_tag(@game.player_two.avatar, class: "user-avatar") %></div>
        <h2 class="user-name"><%= @game.player_two.username %></h2>
      </div>
      <textarea data-solution-target="editortwo"></textarea>
      <div class="code-submit-buttons">
        <button id="playerTwoClear" class="code-submit" data-action="click->solution#clearPlayerTwoSubmission">Clear</button>
        <div class="right-buttons">
          <button id="playerTwoTest" class="code-submit">Test</button>
          <button id="playerTwoSubmit" class="code-submit" data-action="click->solution#playerTwoSubmission">Submit</button>
        </div>
      </div>
    </div>
  </div>
</div>
